{"ast":null,"code":"import _toConsumableArray from\"/Users/ryandawkes/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/ryandawkes/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ryandawkes/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ryandawkes/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ryandawkes/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import io from\"socket.io-client\";import\"./messenger.css\";var socket=io.connect('http://localhost:8000');var MessengerScreen=/*#__PURE__*/function(_Component){_inherits(MessengerScreen,_Component);var _super=_createSuper(MessengerScreen);function MessengerScreen(){var _this;_classCallCheck(this,MessengerScreen);_this=_super.call(this);_this.handleChange=function(e){_this.setState({msg:e.target.value});};_this.state={msg:'',chat:[],chatLogs:[]};return _this;}_createClass(MessengerScreen,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.loadChatLogs();socket.on('chat message',function(msg){_this2.setState({chat:[].concat(_toConsumableArray(_this2.state.chat),[{'id':msg._id,'msg':msg.msg,'date':msg.date}])});});}// Load in the chat logs.\n},{key:\"loadChatLogs\",value:function loadChatLogs(){var _this3=this;axios({url:\"/api/chatlogs\",method:\"GET\"}).then(function(response){_this3.setState({chatLogs:response.data});console.log(_this3.state.chatLogs);}).catch(function(error){console.log(error);});}},{key:\"sendMessage\",value:function sendMessage(message){axios({url:\"/api/messages\",method:\"POST\",data:{msg:message,date:new Date()}}).then(function(response){console.log(response.data);socket.emit('chat message',response.data);}).catch(function(error){console.log(error);});}},{key:\"loadChatLogMessages\",// Load message of a selected chat log.\nvalue:function loadChatLogMessages(chatlog_id){var _this4=this;axios({url:\"api/messages/\".concat(chatlog_id),method:\"GET\"}).then(function(response){_this4.setState({chat:response.data});}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this5=this;var chatLogs=this.state.chatLogs.map(function(log){return/*#__PURE__*/React.createElement(\"div\",{style:{border:\"1px solid red\",padding:\"45px\"},onClick:function onClick(){return _this5.loadChatLogMessages(log._id);}},log._id);});var messages=this.state.chat.map(function(message){return/*#__PURE__*/React.createElement(\"div\",{className:\"msg-outer-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"msg-name-tag\"},\"Test Name \",/*#__PURE__*/React.createElement(\"br\",null),\" \",message.date),/*#__PURE__*/React.createElement(\"div\",{className:\"msg-bubble-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"msg-bubble\",title:message.date},/*#__PURE__*/React.createElement(\"p\",null,message.msg))));});return/*#__PURE__*/React.createElement(\"div\",{className:\"msngr-screen\"},/*#__PURE__*/React.createElement(\"div\",{className:\"msngr-header\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Messages\")),/*#__PURE__*/React.createElement(\"div\",{className:\"msngr-main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"msngr-grid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"msngr-chats\"},chatLogs),/*#__PURE__*/React.createElement(\"div\",{className:\"active-chats\"},/*#__PURE__*/React.createElement(\"div\",{className:\"active-chat-content\"},messages,/*#__PURE__*/React.createElement(\"div\",{className:\"inc-outer-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inc-name-tag\"},\"RYAN \",/*#__PURE__*/React.createElement(\"br\",null),\" 28/08/2020\"),/*#__PURE__*/React.createElement(\"div\",{className:\"inc-bubble-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inc-bubble\",title:\"inc-name-tag\"},/*#__PURE__*/React.createElement(\"p\",null,\"This is a test message\"))))),/*#__PURE__*/React.createElement(\"footer\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"msg-btn\"},/*#__PURE__*/React.createElement(\"img\",{src:require(\"../../../Images/attachment-icon.png\"),alt:\"\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"msg-btn\"},/*#__PURE__*/React.createElement(\"img\",{src:require('../../../Images/img-icon.png'),alt:\"\"})),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"msg-input\",placeholder:\"Type Message Here\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"msg-send-btn\",onClick:function onClick(){return _this5.sendMessage(_this5.state.msg);}},\"Send\"))))));}}]);return MessengerScreen;}(Component);export default MessengerScreen;","map":{"version":3,"sources":["/Users/ryandawkes/Desktop/frontend/src/Screens/Personal/Messenger/MessengerScreen.js"],"names":["React","Component","axios","io","socket","connect","MessengerScreen","handleChange","e","setState","msg","target","value","state","chat","chatLogs","loadChatLogs","on","_id","date","url","method","then","response","data","console","log","catch","error","message","Date","emit","chatlog_id","map","border","padding","loadChatLogMessages","messages","require","sendMessage"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport io from \"socket.io-client\";\n\nimport \"./messenger.css\";\n\nconst socket = io.connect('http://localhost:8000')\n\nclass MessengerScreen extends Component {\n    constructor() {\n        super()\n        this.state = {\n            msg: '',\n            chat: [],\n            chatLogs: []\n        }\n    }\n\n    componentDidMount() {\n        this.loadChatLogs()\n        socket.on('chat message', (msg) => {\n            this.setState({\n                chat: [...this.state.chat, { 'id':msg._id, 'msg':msg.msg, 'date':msg.date }]\n            })\n        })\n    }\n\n    // Load in the chat logs.\n    loadChatLogs() {\n        axios({\n            url: \"/api/chatlogs\",\n            method: \"GET\"\n        })\n        .then(response => {\n            this.setState({ chatLogs: response.data })\n            console.log(this.state.chatLogs)\n        })\n        .catch(error => {\n            console.log(error)\n        })\n    }\n\n    sendMessage(message) {\n        axios({\n            url: \"/api/messages\",\n            method: \"POST\",\n            data: {\n                msg: message,\n                date: new Date\n            }\n        })\n        .then(response => {\n            console.log(response.data)\n            socket.emit('chat message', (response.data))\n        })\n        .catch(error => {\n            console.log(error)\n        })\n    }\n\n    handleChange = (e) => {\n        this.setState({ msg: e.target.value })\n    }\n\n    // Load message of a selected chat log.\n    loadChatLogMessages(chatlog_id) {\n        axios({\n            url: `api/messages/${chatlog_id}`,\n            method: \"GET\"\n        })\n        .then(response => {\n            this.setState({ chat: response.data })\n        })\n        .catch(error => {\n            console.log(error)\n        })\n    }\n\n    render () {\n        const chatLogs = this.state.chatLogs.map((log) =>\n            <div style={{border: \"1px solid red\", padding: \"45px\"}} onClick={() => this.loadChatLogMessages(log._id)}>{log._id}</div>\n        )\n\n        const messages = this.state.chat.map((message) =>\n            <div className=\"msg-outer-container\">\n                {/* Name & Date tag*/}\n                <div className=\"msg-name-tag\">\n                    Test Name <br /> {message.date}\n                </div>\n                <div className=\"msg-bubble-container\">\n                    <div className=\"msg-bubble\" title={message.date}>\n                        <p>{message.msg}</p>\n                    </div>\n                </div>\n                {/*<img src={require('../Images/chat-profile.png')} className=\"msngr-profile-pic\"/>*/}\n            </div>\n        )\n\n        return (\n            <div className=\"msngr-screen\">\n                <div className=\"msngr-header\">\n                    <h3>Messages</h3>\n                </div>\n\n                <div className=\"msngr-main\">\n                    <div className=\"msngr-grid\">\n                        {/*Inactive chat panel*/}\n                        <div className=\"msngr-chats\">\n                            {chatLogs}\n                        </div>\n                        {/*End of inactive chat panel*/}\n                        {/*Active chat panel*/}\n                        <div className=\"active-chats\">\n                            <div className=\"active-chat-content\">\n                                {messages}\n                                {/* INCOMING MESSAGE */}\n                                <div className=\"inc-outer-container\">\n                                    <div className=\"inc-name-tag\">\n                                        RYAN <br /> 28/08/2020\n                                    </div>\n                                    <div className=\"inc-bubble-container\">\n                                        <div className=\"inc-bubble\" title=\"inc-name-tag\">\n                                            <p>This is a test message</p>\n                                        </div>\n                                    </div>\n                                </div>\n                                {/* END OF INCOMING MESSAGE */}\n                            </div>\n                            {/*Message composition bar*/}\n                            <footer>\n                                <button className=\"msg-btn\">\n                                    <img src={require(\"../../../Images/attachment-icon.png\")} alt=\"\"/>\n                                </button>\n                                <button className=\"msg-btn\">\n                                    <img src={require('../../../Images/img-icon.png')} alt=\"\"/>\n                                </button>\n                                <input type=\"text\" className=\"msg-input\" placeholder=\"Type Message Here\" onChange={this.handleChange}/>\n                                <button type=\"submit\" className=\"msg-send-btn\" onClick={() => this.sendMessage(this.state.msg)}>Send</button>\n                            </footer>\n                            {/*End of message composition bar*/}\n                        </div>\n                        {/*End of active chat pane;*/}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default MessengerScreen;\n"]},"metadata":{},"sourceType":"module"}